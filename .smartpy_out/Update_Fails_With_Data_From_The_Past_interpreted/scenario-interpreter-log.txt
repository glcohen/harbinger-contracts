Comment...
 h1: Update Fails With Data From The Past
Comment...
 h2: GIVEN an Oracle contract with some initial data.
Creating contract
 -> (Pair {Elt "XTZ-USD" (Pair "0" (Pair "0" (Pair 0 (Pair 0 (Pair 0 (Pair 0 0))))))} (Some "edpkumfjciYdSYPzFt5dzWt9k974Wnp2qPwHqqjfsJvEwJWpYJnFdW"))
 => ./.smartpy_out/Update_Fails_With_Data_From_The_Past_interpreted/testContractTypes.0.2.tz 2
 => ./.smartpy_out/Update_Fails_With_Data_From_The_Past_interpreted/testContractCode.0.2.tz 159
 => ./.smartpy_out/Update_Fails_With_Data_From_The_Past_interpreted/testContractCode.0.2.tz.json 317
 => ./.smartpy_out/Update_Fails_With_Data_From_The_Past_interpreted/testPrettyPrint.0.2.py 22
Executing update(sp.set_type_expr({'XTZ-USD' : (sp.reduce(sp.make_signature(secret_key = sp.reduce(sp.test_account("Test1").secret_key), message = sp.pack(('XTZ-USD', (sp.timestamp(2), (sp.timestamp(3), (3, (4, (5, (6, 7)))))))), message_format = 'Raw')), (sp.timestamp(2), (sp.timestamp(3), (3, (4, (5, (6, 7)))))))}, sp.TMap(sp.TString, sp.TPair(sp.TSignature, sp.TPair(sp.TTimestamp, sp.TPair(sp.TTimestamp, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TNat))))))))))...
 -> (Pair {Elt "XTZ-USD" (Pair "2" (Pair "3" (Pair 3 (Pair 4 (Pair 5 (Pair 6 7))))))} (Some "edpkumfjciYdSYPzFt5dzWt9k974Wnp2qPwHqqjfsJvEwJWpYJnFdW"))
Comment...
 h2: WHEN the oracle is updated with a time in the past
Comment...
 h2: THEN the update in the past fails
Executing update(sp.set_type_expr({'XTZ-USD' : (sp.reduce(sp.make_signature(secret_key = sp.reduce(sp.test_account("Test1").secret_key), message = sp.pack((sp.timestamp(1), (sp.timestamp(2), (3, (4, (5, (6, 7))))))), message_format = 'Raw')), (sp.timestamp(1), (sp.timestamp(2), (3, (4, (5, (6, 7)))))))}, sp.TMap(sp.TString, sp.TPair(sp.TSignature, sp.TPair(sp.TTimestamp, sp.TPair(sp.TTimestamp, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TPair(sp.TNat, sp.TNat))))))))))...
 -> --- Expected failure in transaction --- WrongCondition in line 90: sp.check_signature(self.data.publicKey.open_some(), sp.fst(assetData.value), sp.pack((assetData.key, sp.snd(assetData.value))))